---
/**
 * NoScript Fallback Component - Progressive Enhancement
 * Based on: GOV.UK Design System, BBC GEL, MDN Web Docs
 *
 * Provides meaningful fallback content when JavaScript is disabled:
 * 1. Informational banner explaining limited functionality
 * 2. Alternative navigation for static pages
 * 3. Contact information for assistance
 *
 * @see https://www.gov.uk/service-manual/technology/using-progressive-enhancement
 * @see https://developer.mozilla.org/en-US/docs/Glossary/Progressive_Enhancement
 */

interface Props {
    showBanner?: boolean;
    showNavFallback?: boolean;
}

const { showBanner = true, showNavFallback = true } = Astro.props;
const baseUrl = import.meta.env.BASE_URL || '/Analista-Programador-Computacional-DuocUC';
---

<noscript>
    {showBanner && (
        <div class="noscript-banner" role="alert">
            <div class="noscript-content">
                <i class="fas fa-exclamation-triangle noscript-icon"></i>
                <div class="noscript-text">
                    <strong>JavaScript est치 deshabilitado</strong>
                    <p>
                        Algunas funciones interactivas no estar치n disponibles.
                        El contenido principal sigue siendo accesible.
                    </p>
                </div>
            </div>
        </div>
    )}

    {showNavFallback && (
        <nav class="noscript-nav" aria-label="Navegaci칩n sin JavaScript">
            <div class="noscript-nav-content">
                <span class="noscript-nav-label">Navegaci칩n:</span>
                <a href={`${baseUrl}/inicio/`}>Inicio</a>
                <a href={`${baseUrl}/stack/`}>Stack</a>
                <a href={`${baseUrl}/arquitectura/`}>Arquitectura</a>
                <a href={`${baseUrl}/recursos/`}>Recursos</a>
                <a href={`${baseUrl}/proyectos/`}>Proyectos</a>
            </div>
        </nav>
    )}

    <style>
        /* NoScript Banner Styles */
        .noscript-banner {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            color: #1f2937;
            padding: 1rem 2rem;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 9999;
        }

        .noscript-content {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .noscript-icon {
            font-size: 1.5rem;
        }

        .noscript-text {
            text-align: left;
        }

        .noscript-text strong {
            font-size: 1rem;
            display: block;
            margin-bottom: 0.25rem;
        }

        .noscript-text p {
            margin: 0;
            font-size: 0.875rem;
            opacity: 0.9;
        }

        /* NoScript Navigation Fallback */
        .noscript-nav {
            background: #1e293b;
            padding: 0.75rem 2rem;
            border-bottom: 1px solid #334155;
        }

        .noscript-nav-content {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1.5rem;
            flex-wrap: wrap;
            max-width: 1200px;
            margin: 0 auto;
        }

        .noscript-nav-label {
            color: #94a3b8;
            font-weight: 500;
            font-size: 0.875rem;
        }

        .noscript-nav a {
            color: #f8fafc;
            text-decoration: none;
            font-size: 0.875rem;
            padding: 0.375rem 0.75rem;
            border-radius: 6px;
            transition: background 0.2s;
        }

        .noscript-nav a:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .noscript-nav a:focus {
            outline: 2px solid #00d4ff;
            outline-offset: 2px;
        }

        /* Mobile responsiveness */
        @media (max-width: 640px) {
            .noscript-banner {
                padding: 1rem;
            }

            .noscript-content {
                flex-direction: column;
                text-align: center;
            }

            .noscript-text {
                text-align: center;
            }

            .noscript-nav-content {
                gap: 0.75rem;
            }

            .noscript-nav-label {
                width: 100%;
            }
        }
    </style>
</noscript>
