---
// Password Generator - Cryptographically secure using Web Crypto API
---

<section id="password-generator" class="tool-section">
    <div class="tool-container">
        <!-- Header -->
        <div class="tool-header">
            <div class="tool-icon">
                <i class="fas fa-key"></i>
            </div>
            <div class="tool-title">
                <h2>Generador de Contraseñas Seguras</h2>
                <p>Contraseñas criptográficamente seguras con Web Crypto API</p>
            </div>
            <div class="security-badge">
                <i class="fas fa-shield-alt"></i>
                <span>256-bit</span>
            </div>
        </div>

        <div class="password-tool">
            <!-- Password Display -->
            <div class="password-display">
                <div class="password-field">
                    <input
                        type="password"
                        id="password-output"
                        readonly
                        value="Haz clic en Generar"
                        class="password-input"
                    />
                    <button id="toggle-visibility" class="icon-btn" title="Mostrar/Ocultar">
                        <i class="fas fa-eye" id="eye-icon"></i>
                    </button>
                    <button id="copy-password" class="icon-btn" title="Copiar">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
                <div class="copy-feedback" id="copy-feedback">
                    <i class="fas fa-check"></i> Copiado al portapapeles
                </div>
            </div>

            <!-- Strength Indicator -->
            <div class="strength-container">
                <div class="strength-bar">
                    <div class="strength-fill" id="strength-fill"></div>
                </div>
                <div class="strength-info">
                    <span class="strength-label" id="strength-label">-</span>
                    <span class="entropy-value" id="entropy-value">0 bits</span>
                </div>
            </div>

            <!-- Configuration -->
            <div class="config-grid">
                <!-- Length Slider -->
                <div class="config-section length-section">
                    <div class="config-header">
                        <label for="password-length">Longitud</label>
                        <span class="length-value" id="length-value">16</span>
                    </div>
                    <input
                        type="range"
                        id="password-length"
                        min="8"
                        max="64"
                        value="16"
                        class="length-slider"
                    />
                    <div class="length-labels">
                        <span>8</span>
                        <span>64</span>
                    </div>
                </div>

                <!-- Character Options -->
                <div class="config-section options-section">
                    <label class="config-label">Caracteres</label>
                    <div class="options-grid">
                        <label class="option-item">
                            <input type="checkbox" id="opt-uppercase" checked />
                            <span class="checkmark"></span>
                            <span class="option-text">
                                <span class="option-name">Mayúsculas</span>
                                <span class="option-preview">A-Z</span>
                            </span>
                        </label>
                        <label class="option-item">
                            <input type="checkbox" id="opt-lowercase" checked />
                            <span class="checkmark"></span>
                            <span class="option-text">
                                <span class="option-name">Minúsculas</span>
                                <span class="option-preview">a-z</span>
                            </span>
                        </label>
                        <label class="option-item">
                            <input type="checkbox" id="opt-numbers" checked />
                            <span class="checkmark"></span>
                            <span class="option-text">
                                <span class="option-name">Números</span>
                                <span class="option-preview">0-9</span>
                            </span>
                        </label>
                        <label class="option-item">
                            <input type="checkbox" id="opt-symbols" checked />
                            <span class="checkmark"></span>
                            <span class="option-text">
                                <span class="option-name">Símbolos</span>
                                <span class="option-preview">!@#$%</span>
                            </span>
                        </label>
                    </div>
                </div>

                <!-- Advanced Options -->
                <div class="config-section advanced-section">
                    <label class="config-label">Opciones Avanzadas</label>
                    <div class="advanced-options">
                        <label class="option-item">
                            <input type="checkbox" id="opt-exclude-ambiguous" />
                            <span class="checkmark"></span>
                            <span class="option-text">
                                <span class="option-name">Excluir ambiguos</span>
                                <span class="option-preview">0, O, l, 1, I</span>
                            </span>
                        </label>
                        <label class="option-item">
                            <input type="checkbox" id="opt-exclude-similar" />
                            <span class="checkmark"></span>
                            <span class="option-text">
                                <span class="option-name">Excluir similares</span>
                                <span class="option-preview">i, L, o, O</span>
                            </span>
                        </label>
                    </div>
                </div>
            </div>

            <!-- Generate Button -->
            <button id="generate-password" class="generate-btn">
                <i class="fas fa-sync-alt"></i>
                <span>Generar Contraseña</span>
            </button>

            <!-- History -->
            <div class="history-section">
                <div class="history-header">
                    <h4><i class="fas fa-history"></i> Historial de Sesión</h4>
                    <button id="clear-history" class="clear-btn" title="Limpiar historial">
                        <i class="fas fa-trash-alt"></i>
                    </button>
                </div>
                <div class="history-list" id="history-list">
                    <p class="history-empty">Las contraseñas generadas aparecerán aquí</p>
                </div>
            </div>

            <!-- Tips -->
            <div class="tips-section">
                <h4><i class="fas fa-lightbulb"></i> Consejos de Seguridad</h4>
                <ul class="tips-list">
                    <li>Usa una contraseña única para cada cuenta</li>
                    <li>Considera usar un gestor de contraseñas como Bitwarden o 1Password</li>
                    <li>Nunca compartas tus contraseñas por email o chat</li>
                    <li>Activa la autenticación de dos factores (2FA) cuando sea posible</li>
                </ul>
            </div>
        </div>
    </div>
</section>

<script>
    // Password Generator with Web Crypto API
    class SecurePasswordGenerator {
        constructor() {
            this.charsets = {
                uppercase: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ',
                lowercase: 'abcdefghijklmnopqrstuvwxyz',
                numbers: '0123456789',
                symbols: '!@#$%^&*()_+-=[]{}|;:,.<>?'
            };
            this.ambiguousChars = '0OlI1';
            this.similarChars = 'iLoO';
            this.history = [];
            this.maxHistory = 5;
        }

        generatePassword(length, options) {
            let chars = '';

            if (options.uppercase) chars += this.charsets.uppercase;
            if (options.lowercase) chars += this.charsets.lowercase;
            if (options.numbers) chars += this.charsets.numbers;
            if (options.symbols) chars += this.charsets.symbols;

            if (options.excludeAmbiguous) {
                chars = chars.split('').filter(c => !this.ambiguousChars.includes(c)).join('');
            }
            if (options.excludeSimilar) {
                chars = chars.split('').filter(c => !this.similarChars.includes(c)).join('');
            }

            if (chars.length === 0) {
                return { password: '', error: 'Selecciona al menos un tipo de caracter' };
            }

            // Use Web Crypto API with rejection sampling
            const password = this.cryptoRandom(chars, length);

            // Ensure at least one character from each selected set
            const ensuredPassword = this.ensureCharacterTypes(password, options, chars);

            return {
                password: ensuredPassword,
                entropy: this.calculateEntropy(ensuredPassword, chars.length),
                charsetSize: chars.length
            };
        }

        cryptoRandom(chars, length) {
            const array = new Uint32Array(length);
            crypto.getRandomValues(array);

            let password = '';
            const max = Math.floor(0xFFFFFFFF / chars.length) * chars.length;

            for (let i = 0; i < length; i++) {
                let randomValue = array[i];

                // Rejection sampling to avoid modulo bias
                while (randomValue >= max) {
                    const newArray = new Uint32Array(1);
                    crypto.getRandomValues(newArray);
                    randomValue = newArray[0];
                }

                password += chars[randomValue % chars.length];
            }

            return password;
        }

        ensureCharacterTypes(password, options, allChars) {
            const chars = password.split('');
            const requirements = [];

            if (options.uppercase) requirements.push(this.charsets.uppercase);
            if (options.lowercase) requirements.push(this.charsets.lowercase);
            if (options.numbers) requirements.push(this.charsets.numbers);
            if (options.symbols) requirements.push(this.charsets.symbols);

            // Check each requirement
            requirements.forEach((charset, index) => {
                const hasChar = chars.some(c => charset.includes(c));
                if (!hasChar && chars.length > index) {
                    // Replace a random position with a character from this set
                    const randomPos = this.getSecureRandomInt(chars.length);
                    const randomChar = charset[this.getSecureRandomInt(charset.length)];
                    chars[randomPos] = randomChar;
                }
            });

            // Shuffle the result
            return this.secureShuffle(chars).join('');
        }

        getSecureRandomInt(max) {
            const array = new Uint32Array(1);
            crypto.getRandomValues(array);
            return array[0] % max;
        }

        secureShuffle(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = this.getSecureRandomInt(i + 1);
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        calculateEntropy(password, charsetSize) {
            return Math.log2(Math.pow(charsetSize, password.length));
        }

        getStrengthInfo(entropy) {
            if (entropy < 28) return { level: 'muy-debil', text: 'Muy Débil', percent: 15, color: '#ef4444' };
            if (entropy < 36) return { level: 'debil', text: 'Débil', percent: 30, color: '#f97316' };
            if (entropy < 60) return { level: 'moderada', text: 'Moderada', percent: 50, color: '#eab308' };
            if (entropy < 80) return { level: 'fuerte', text: 'Fuerte', percent: 75, color: '#22c55e' };
            if (entropy < 100) return { level: 'muy-fuerte', text: 'Muy Fuerte', percent: 90, color: '#10b981' };
            return { level: 'excelente', text: 'Excelente', percent: 100, color: '#00d4ff' };
        }

        addToHistory(password) {
            if (this.history.length >= this.maxHistory) {
                this.history.pop();
            }
            this.history.unshift({
                password,
                timestamp: new Date().toLocaleTimeString()
            });
        }

        clearHistory() {
            this.history = [];
        }
    }

    // UI Controller
    function initPasswordGenerator() {
        const generator = new SecurePasswordGenerator();

        // DOM Elements
        const passwordOutput = document.getElementById('password-output');
        const lengthSlider = document.getElementById('password-length');
        const lengthValue = document.getElementById('length-value');
        const generateBtn = document.getElementById('generate-password');
        const copyBtn = document.getElementById('copy-password');
        const toggleBtn = document.getElementById('toggle-visibility');
        const eyeIcon = document.getElementById('eye-icon');
        const strengthFill = document.getElementById('strength-fill');
        const strengthLabel = document.getElementById('strength-label');
        const entropyValue = document.getElementById('entropy-value');
        const historyList = document.getElementById('history-list');
        const clearHistoryBtn = document.getElementById('clear-history');
        const copyFeedback = document.getElementById('copy-feedback');

        // Checkboxes
        const optUppercase = document.getElementById('opt-uppercase');
        const optLowercase = document.getElementById('opt-lowercase');
        const optNumbers = document.getElementById('opt-numbers');
        const optSymbols = document.getElementById('opt-symbols');
        const optExcludeAmbiguous = document.getElementById('opt-exclude-ambiguous');
        const optExcludeSimilar = document.getElementById('opt-exclude-similar');

        if (!passwordOutput || !generateBtn) return;

        // Generate password function
        function generate() {
            const options = {
                uppercase: optUppercase?.checked ?? true,
                lowercase: optLowercase?.checked ?? true,
                numbers: optNumbers?.checked ?? true,
                symbols: optSymbols?.checked ?? true,
                excludeAmbiguous: optExcludeAmbiguous?.checked ?? false,
                excludeSimilar: optExcludeSimilar?.checked ?? false
            };

            const length = parseInt(lengthSlider?.value ?? '16');
            const result = generator.generatePassword(length, options);

            if (result.error) {
                passwordOutput.value = result.error;
                updateStrength(0);
                return;
            }

            passwordOutput.value = result.password;
            passwordOutput.type = 'password';
            if (eyeIcon) {
                eyeIcon.className = 'fas fa-eye';
            }

            updateStrength(result.entropy);
            generator.addToHistory(result.password);
            updateHistoryDisplay();

            // Animate generate button
            generateBtn.classList.add('generating');
            setTimeout(() => generateBtn.classList.remove('generating'), 300);
        }

        function updateStrength(entropy) {
            const info = generator.getStrengthInfo(entropy);

            if (strengthFill) {
                strengthFill.style.width = `${info.percent}%`;
                strengthFill.style.background = `linear-gradient(90deg, ${info.color}, ${info.color}dd)`;
            }
            if (strengthLabel) {
                strengthLabel.textContent = info.text;
                strengthLabel.style.color = info.color;
            }
            if (entropyValue) {
                entropyValue.textContent = `${entropy.toFixed(1)} bits`;
            }
        }

        function updateHistoryDisplay() {
            if (!historyList) return;

            if (generator.history.length === 0) {
                historyList.innerHTML = '<p class="history-empty">Las contraseñas generadas aparecerán aquí</p>';
                return;
            }

            historyList.innerHTML = generator.history.map((item, index) => `
                <div class="history-item" data-index="${index}">
                    <span class="history-password">••••••••••••</span>
                    <span class="history-time">${item.timestamp}</span>
                    <button class="history-copy" data-password="${item.password}" title="Copiar">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            `).join('');

            // Add copy listeners
            historyList.querySelectorAll('.history-copy').forEach(btn => {
                btn.onclick = async (e) => {
                    e.stopPropagation();
                    const password = btn.dataset.password;
                    await copyToClipboard(password);
                };
            });
        }

        async function copyToClipboard(text) {
            try {
                await navigator.clipboard.writeText(text);
                showCopyFeedback();
            } catch (err) {
                console.error('Failed to copy:', err);
            }
        }

        function showCopyFeedback() {
            if (copyFeedback) {
                copyFeedback.classList.add('show');
                setTimeout(() => copyFeedback.classList.remove('show'), 2000);
            }
        }

        // Event Listeners
        generateBtn.onclick = generate;

        if (copyBtn) {
            copyBtn.onclick = () => {
                if (passwordOutput.value && !passwordOutput.value.includes('Haz clic')) {
                    copyToClipboard(passwordOutput.value);
                }
            };
        }

        if (toggleBtn && eyeIcon) {
            toggleBtn.onclick = () => {
                if (passwordOutput.type === 'password') {
                    passwordOutput.type = 'text';
                    eyeIcon.className = 'fas fa-eye-slash';
                } else {
                    passwordOutput.type = 'password';
                    eyeIcon.className = 'fas fa-eye';
                }
            };
        }

        if (lengthSlider && lengthValue) {
            lengthSlider.oninput = () => {
                lengthValue.textContent = lengthSlider.value;
            };
        }

        if (clearHistoryBtn) {
            clearHistoryBtn.onclick = () => {
                generator.clearHistory();
                updateHistoryDisplay();
            };
        }

        // Ensure at least one option is selected
        [optUppercase, optLowercase, optNumbers, optSymbols].forEach(checkbox => {
            if (checkbox) {
                checkbox.onchange = () => {
                    const anyChecked = [optUppercase, optLowercase, optNumbers, optSymbols]
                        .some(cb => cb?.checked);
                    if (!anyChecked) {
                        checkbox.checked = true;
                    }
                };
            }
        });

        // Generate initial password
        generate();
    }

    // Initialize on page load and Astro transitions
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initPasswordGenerator);
    } else {
        initPasswordGenerator();
    }
    document.addEventListener('astro:page-load', initPasswordGenerator);
</script>

<style>
    .tool-section {
        padding: 4rem 2rem;
        background: linear-gradient(180deg, rgba(0, 212, 255, 0.03) 0%, transparent 100%);
    }

    .tool-container {
        max-width: 700px;
        margin: 0 auto;
    }

    .tool-header {
        display: flex;
        align-items: center;
        gap: 1rem;
        margin-bottom: 2rem;
        flex-wrap: wrap;
    }

    .tool-icon {
        width: 60px;
        height: 60px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: linear-gradient(135deg, rgba(0, 212, 255, 0.2), rgba(139, 92, 246, 0.2));
        border-radius: 16px;
        font-size: 1.5rem;
        color: #00d4ff;
    }

    .tool-title h2 {
        font-size: 1.75rem;
        font-weight: 700;
        margin: 0;
        background: linear-gradient(135deg, #f8fafc, #94a3b8);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    .tool-title p {
        font-size: 0.9rem;
        color: #64748b;
        margin: 0.25rem 0 0 0;
    }

    .security-badge {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.5rem 1rem;
        background: rgba(16, 185, 129, 0.1);
        border: 1px solid rgba(16, 185, 129, 0.3);
        border-radius: 20px;
        font-size: 0.8rem;
        color: #10b981;
        margin-left: auto;
    }

    .password-tool {
        background: rgba(15, 23, 42, 0.6);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 20px;
        padding: 2rem;
        backdrop-filter: blur(10px);
    }

    /* Password Display */
    .password-display {
        margin-bottom: 1.5rem;
        position: relative;
    }

    .password-field {
        display: flex;
        align-items: center;
        background: rgba(0, 0, 0, 0.3);
        border: 2px solid rgba(0, 212, 255, 0.3);
        border-radius: 12px;
        padding: 0.5rem;
        transition: border-color 0.3s;
    }

    .password-field:focus-within {
        border-color: #00d4ff;
    }

    .password-input {
        flex: 1;
        background: transparent;
        border: none;
        outline: none;
        font-family: 'JetBrains Mono', monospace;
        font-size: 1.25rem;
        color: #f8fafc;
        padding: 0.75rem 1rem;
        letter-spacing: 0.05em;
    }

    .icon-btn {
        width: 44px;
        height: 44px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: rgba(255, 255, 255, 0.05);
        border: none;
        border-radius: 10px;
        color: #94a3b8;
        cursor: pointer;
        transition: all 0.2s;
    }

    .icon-btn:hover {
        background: rgba(0, 212, 255, 0.2);
        color: #00d4ff;
    }

    .copy-feedback {
        position: absolute;
        bottom: -35px;
        left: 50%;
        transform: translateX(-50%);
        background: #10b981;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        font-size: 0.85rem;
        opacity: 0;
        transition: opacity 0.3s;
        pointer-events: none;
    }

    .copy-feedback.show {
        opacity: 1;
    }

    /* Strength Indicator */
    .strength-container {
        margin-bottom: 2rem;
    }

    .strength-bar {
        height: 8px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 4px;
        overflow: hidden;
        margin-bottom: 0.75rem;
    }

    .strength-fill {
        height: 100%;
        width: 0%;
        border-radius: 4px;
        transition: all 0.5s ease;
    }

    .strength-info {
        display: flex;
        justify-content: space-between;
        font-size: 0.85rem;
    }

    .strength-label {
        font-weight: 600;
    }

    .entropy-value {
        color: #64748b;
        font-family: 'JetBrains Mono', monospace;
    }

    /* Configuration */
    .config-grid {
        display: flex;
        flex-direction: column;
        gap: 1.5rem;
        margin-bottom: 2rem;
    }

    .config-section {
        padding: 1.25rem;
        background: rgba(255, 255, 255, 0.03);
        border-radius: 12px;
    }

    .config-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1rem;
    }

    .config-header label {
        font-weight: 600;
        color: #f8fafc;
    }

    .config-label {
        display: block;
        font-weight: 600;
        color: #f8fafc;
        margin-bottom: 1rem;
    }

    .length-value {
        font-size: 1.5rem;
        font-weight: 700;
        color: #00d4ff;
        font-family: 'JetBrains Mono', monospace;
    }

    .length-slider {
        width: 100%;
        height: 8px;
        -webkit-appearance: none;
        appearance: none;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 4px;
        outline: none;
    }

    .length-slider::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 24px;
        height: 24px;
        background: linear-gradient(135deg, #00d4ff, #7c3aed);
        border-radius: 50%;
        cursor: pointer;
        box-shadow: 0 2px 10px rgba(0, 212, 255, 0.4);
    }

    .length-slider::-moz-range-thumb {
        width: 24px;
        height: 24px;
        background: linear-gradient(135deg, #00d4ff, #7c3aed);
        border-radius: 50%;
        cursor: pointer;
        border: none;
    }

    .length-labels {
        display: flex;
        justify-content: space-between;
        margin-top: 0.5rem;
        font-size: 0.75rem;
        color: #64748b;
    }

    /* Options Grid */
    .options-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 0.75rem;
    }

    .option-item {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        padding: 0.75rem 1rem;
        background: rgba(255, 255, 255, 0.03);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 10px;
        cursor: pointer;
        transition: all 0.2s;
    }

    .option-item:hover {
        background: rgba(0, 212, 255, 0.1);
        border-color: rgba(0, 212, 255, 0.3);
    }

    .option-item input[type="checkbox"] {
        display: none;
    }

    .checkmark {
        width: 20px;
        height: 20px;
        border: 2px solid rgba(255, 255, 255, 0.3);
        border-radius: 6px;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.2s;
        flex-shrink: 0;
    }

    .checkmark::after {
        content: '✓';
        font-size: 0.75rem;
        color: transparent;
        transition: color 0.2s;
    }

    .option-item input:checked + .checkmark {
        background: linear-gradient(135deg, #00d4ff, #7c3aed);
        border-color: transparent;
    }

    .option-item input:checked + .checkmark::after {
        color: white;
    }

    .option-text {
        display: flex;
        flex-direction: column;
        gap: 0.125rem;
    }

    .option-name {
        font-size: 0.9rem;
        color: #f8fafc;
    }

    .option-preview {
        font-size: 0.75rem;
        color: #64748b;
        font-family: 'JetBrains Mono', monospace;
    }

    .advanced-options {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
    }

    /* Generate Button */
    .generate-btn {
        width: 100%;
        padding: 1rem 2rem;
        background: linear-gradient(135deg, #00d4ff, #7c3aed);
        border: none;
        border-radius: 12px;
        font-size: 1.1rem;
        font-weight: 600;
        color: white;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.75rem;
        transition: all 0.3s;
    }

    .generate-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 30px rgba(0, 212, 255, 0.3);
    }

    .generate-btn.generating i {
        animation: spin 0.3s ease;
    }

    @keyframes spin {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
    }

    /* History Section */
    .history-section {
        margin-top: 2rem;
        padding-top: 1.5rem;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
    }

    .history-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1rem;
    }

    .history-header h4 {
        font-size: 0.9rem;
        font-weight: 600;
        color: #94a3b8;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        margin: 0;
    }

    .clear-btn {
        background: transparent;
        border: none;
        color: #64748b;
        cursor: pointer;
        padding: 0.5rem;
        border-radius: 6px;
        transition: all 0.2s;
    }

    .clear-btn:hover {
        background: rgba(239, 68, 68, 0.1);
        color: #ef4444;
    }

    .history-list {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
    }

    .history-empty {
        text-align: center;
        color: #64748b;
        font-size: 0.85rem;
        padding: 1rem;
    }

    .history-item {
        display: flex;
        align-items: center;
        gap: 1rem;
        padding: 0.75rem 1rem;
        background: rgba(255, 255, 255, 0.03);
        border-radius: 8px;
    }

    .history-password {
        flex: 1;
        font-family: 'JetBrains Mono', monospace;
        font-size: 0.85rem;
        color: #94a3b8;
    }

    .history-time {
        font-size: 0.75rem;
        color: #64748b;
    }

    .history-copy {
        background: transparent;
        border: none;
        color: #64748b;
        cursor: pointer;
        padding: 0.375rem;
        border-radius: 4px;
        transition: all 0.2s;
    }

    .history-copy:hover {
        background: rgba(0, 212, 255, 0.1);
        color: #00d4ff;
    }

    /* Tips Section */
    .tips-section {
        margin-top: 2rem;
        padding: 1.25rem;
        background: rgba(245, 158, 11, 0.1);
        border: 1px solid rgba(245, 158, 11, 0.2);
        border-radius: 12px;
    }

    .tips-section h4 {
        font-size: 0.9rem;
        font-weight: 600;
        color: #f59e0b;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        margin: 0 0 1rem 0;
    }

    .tips-list {
        margin: 0;
        padding-left: 1.25rem;
        color: #94a3b8;
        font-size: 0.85rem;
    }

    .tips-list li {
        margin-bottom: 0.5rem;
    }

    .tips-list li:last-child {
        margin-bottom: 0;
    }

    /* Responsive */
    @media (max-width: 640px) {
        .tool-header {
            flex-direction: column;
            text-align: center;
        }

        .security-badge {
            margin-left: 0;
        }

        .password-input {
            font-size: 1rem;
        }

        .options-grid {
            grid-template-columns: 1fr;
        }

        .tool-title h2 {
            font-size: 1.5rem;
        }
    }

    /* Light Mode */
    :global([data-theme="light"]) .password-tool {
        background: rgba(255, 255, 255, 0.8);
        border-color: rgba(0, 0, 0, 0.1);
    }

    :global([data-theme="light"]) .password-field {
        background: rgba(0, 0, 0, 0.03);
        border-color: rgba(0, 212, 255, 0.3);
    }

    :global([data-theme="light"]) .password-input {
        color: #1e293b;
    }

    :global([data-theme="light"]) .tool-title h2 {
        background: linear-gradient(135deg, #1e293b, #475569);
        -webkit-background-clip: text;
        background-clip: text;
    }

    :global([data-theme="light"]) .config-section {
        background: rgba(0, 0, 0, 0.03);
    }

    :global([data-theme="light"]) .config-header label,
    :global([data-theme="light"]) .config-label,
    :global([data-theme="light"]) .option-name {
        color: #1e293b;
    }

    :global([data-theme="light"]) .option-item {
        background: rgba(0, 0, 0, 0.02);
        border-color: rgba(0, 0, 0, 0.1);
    }

    :global([data-theme="light"]) .option-item:hover {
        background: rgba(0, 212, 255, 0.1);
    }

    :global([data-theme="light"]) .checkmark {
        border-color: rgba(0, 0, 0, 0.2);
    }

    :global([data-theme="light"]) .history-item {
        background: rgba(0, 0, 0, 0.03);
    }

    :global([data-theme="light"]) .tips-section {
        background: rgba(245, 158, 11, 0.08);
    }

    :global([data-theme="light"]) .strength-bar {
        background: rgba(0, 0, 0, 0.1);
    }

    :global([data-theme="light"]) .icon-btn {
        background: rgba(0, 0, 0, 0.05);
        color: #64748b;
    }

    :global([data-theme="light"]) .icon-btn:hover {
        background: rgba(0, 212, 255, 0.15);
        color: #0891b2;
    }
</style>
